<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CH Digital Services – AI Chatbot</title>
  <style>
    body { margin: 0; font-family: 'Segoe UI', sans-serif; background-color: #0d0d0d; color: white; }
    .chatbox { max-width: 600px; margin: 60px auto; background: #1a1a1a; border-radius: 16px; box-shadow: 0 0 30px #1f51ff; padding: 20px; }
    .messages { max-height: 300px; overflow-y: auto; padding: 10px; background: #121212; border-radius: 8px; margin-bottom: 10px; }
    .message { margin: 8px 0; }
    .bot { color: #00f7ff; }
    .user { text-align: right; color: #1f51ff; }
    .input-group { display: flex; gap: 10px; margin-bottom: 10px; }
    input[type=text], input[type=email], textarea { flex: 1; padding: 10px; border: none; border-radius: 6px; background: #222; color: white; }
    button { background: #1f51ff; border: none; padding: 10px 15px; border-radius: 6px; color: white; cursor: pointer; }
    .upload-btn, .mic-btn { font-size: 20px; background: #444; }
    .lang-select { margin-top: 10px; background: #111; color: white; border: 1px solid #444; padding: 5px; border-radius: 6px; }
    form { display: flex; flex-direction: column; gap: 10px; margin-top: 20px; }
    textarea { resize: vertical; min-height: 60px; }
  </style>
</head>
<body>
  <div class="chatbox">
    <h2>🤖 CH Digital Services Chatbot</h2>
    <div class="messages" id="messages"></div>
    <div class="input-group">
      <input type="text" id="userInput" placeholder="Type or speak your message...">
      <button onclick="sendMessage()">Send</button>
      <button class="mic-btn" onclick="startListening()">🎤</button>
    </div>
    <button class="upload-btn" onclick="document.getElementById('fileInput').click()">📎 Upload ID</button>
    <input type="file" id="fileInput" accept="image/*,.pdf" style="display:none">
    <select class="lang-select" onchange="setLang(this.value)">
      <option value="en">🇺🇸 English</option>
      <option value="tl">🇵🇭 Filipino</option>
      <option value="vi">🇻🇳 Vietnamese</option>
    </select>

    <form id="supportForm">
      <h3>📩 Submit Your Account Issue</h3>
      <input type="text" id="name" placeholder="Your Name" required>
      <input type="email" id="email" placeholder="Your Email" required>
      <textarea id="issue" placeholder="Describe your issue..." required></textarea>
      <button type="submit">Submit</button>
    </form>
  </div>

  <script>
    let currentLang = 'en';
    const messages = document.getElementById("messages");
    const input = document.getElementById("userInput");
    const fileInput = document.getElementById("fileInput");
    const supportForm = document.getElementById("supportForm");

    function setLang(lang) {
      currentLang = lang;
      appendMessage(`🌐 Language set to ${lang.toUpperCase()}`, 'bot');
    }

    function appendMessage(text, sender) {
      const msg = document.createElement("div");
      msg.className = `message ${sender}`;
      msg.textContent = text;
      messages.appendChild(msg);
      messages.scrollTop = messages.scrollHeight;
    }

    function sendMessage() {
      const text = input.value.trim();
      if (!text) return;
      appendMessage(text, 'user');
      input.value = '';
      respondToUser(text);
    }

    function respondToUser(msg) {
      let response = "🤖 Sorry, I didn't catch that.";
      const m = msg.toLowerCase();
      if (m.includes("recover") || m.includes("account")) response = "🔧 Let's start your account recovery. Upload your ID or fill out the form below.";
      else if (m.includes("how long")) response = "⏱️ Most recovery requests are handled within 24–48 hours.";
      else if (m.includes("hi") || m.includes("hello")) response = "👋 Hello! I’m your recovery assistant."
      else if (m.includes("thank")) response = "🙏 You're welcome! We’re here to help.";
      appendMessage(response, 'bot');
      speak(response);
    }

    function startListening() {
      if (!('webkitSpeechRecognition' in window)) {
        alert("❌ Voice input not supported.");
        return;
      }
      const recognition = new webkitSpeechRecognition();
      recognition.lang = currentLang === 'vi' ? 'vi-VN' : (currentLang === 'tl' ? 'fil-PH' : 'en-US');
      recognition.onstart = () => appendMessage("🎤 Listening...", 'bot');
      recognition.onresult = (e) => {
        const transcript = e.results[0][0].transcript;
        input.value = transcript;
        sendMessage();
      };
      recognition.start();
    }

    function speak(text) {
      if (!('speechSynthesis' in window)) return;
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = currentLang === 'vi' ? 'vi-VN' : (currentLang === 'tl' ? 'fil-PH' : 'en-US');
      window.speechSynthesis.speak(utterance);
    }

    fileInput.addEventListener("change", () => {
      const file = fileInput.files[0];
      if (!file) return;
      appendMessage(`📎 File selected: ${file.name}`, 'user');
      appendMessage("📬 Sending file securely to CHDS team...", 'bot');
      setTimeout(() => {
        appendMessage("✅ Your ID has been submitted. We’ll contact you soon.", 'bot');
        speak("Your ID has been submitted. We’ll contact you soon.");
      }, 2000);
    });

    supportForm.addEventListener("submit", function(e) {
      e.preventDefault();
      const name = document.getElementById("name").value;
      const email = document.getElementById("email").value;
      const issue = document.getElementById("issue").value;

      appendMessage(`📤 Form submitted by ${name} (${email})`, 'user');
      appendMessage("✅ We’ve received your issue and will email you shortly.", 'bot');
      speak("We’ve received your issue and will email you shortly.");

      // Optional: simulate sending email
      console.log(`Send to: reclaimxc@gmail.com\nName: ${name}\nEmail: ${email}\nIssue: ${issue}`);
      supportForm.reset();
    });
  </script>
</body>
      </html>
      
