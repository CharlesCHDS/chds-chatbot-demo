<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CH Digital Services Chatbot</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Roboto', sans-serif; }
    body {
      background: radial-gradient(circle, #0d0d0d, #000000);
      color: #fff;
      overflow: hidden;
    }
    canvas#bg {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      z-index: -1;
    }
    .loader {
      position: fixed;
      inset: 0;
      background: #000;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    .loader img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      animation: pulse 2s infinite ease-in-out, rotate 8s linear infinite;
      box-shadow: 0 0 20px #1f51ff;
    }
    .loader span {
      margin-top: 20px;
      font-size: 1.1em;
      color: #1f51ff;
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.05); opacity: 0.7; }
    }
    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .chatbox {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      max-width: 600px;
      margin: 60px auto;
      background-color: #121212dd;
      border-radius: 12px;
      box-shadow: 0 0 20px #1f51ffcc;
      overflow: hidden;
    }
    .chat-header {
      background-color: #1f51ff;
      padding: 16px;
      display: flex;
      align-items: center;
      font-size: 1.2em;
      font-weight: bold;
      color: white;
    }
    .chat-header img {
      width: 45px;
      height: 45px;
      margin-right: 10px;
      border-radius: 50%;
      box-shadow: 0 0 10px #00f7ff;
      animation: pulse 3s infinite;
    }
    .messages {
      padding: 20px;
      height: 400px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 12px;
      scroll-behavior: smooth;
    }
    .message {
      max-width: 80%;
      padding: 12px;
      border-radius: 10px;
      animation: fadeIn 0.4s ease forwards;
    }
    .bot { background: #333; align-self: flex-start; }
    .user { background: #1f51ff; align-self: flex-end; }
    .typing { font-style: italic; color: #ccc; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .input-box {
      display: flex;
      border-top: 1px solid #333;
      background-color: #1c1c1c;
    }
    .input-box input {
      flex: 1;
      padding: 14px;
      background: #1c1c1c;
      color: #fff;
      border: none;
    }
    .input-box button {
      padding: 14px 18px;
      background-color: #1f51ff;
      color: #fff;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
<canvas id="bg"></canvas>
<div class="loader" id="loader">
  <span>Loading CH Digital Services...</span>
</div>
<div class="chatbox" style="display:none;">
  <div class="chat-header">
    <img src="https://i.ibb.co/k2xHwFFz/Chat-GPT-Image-Jun-23-2025-01-33-11-PM.png" alt="Logo" /> CH Digital Services
  </div>
  <div class="messages" id="messages">
    <div class="message bot">üëã Welcome! Please enter your email, phone number, or question to begin:</div>
  </div>
  <div class="input-box">
    <input type="text" id="userInput" placeholder="Type your message...">
    <button onclick="sendMessage()">Send</button>
  </div>
</div>
<script>
  window.onload = () => {
    setTimeout(() => {
    document.getElementById('loader').style.display = 'none';
    document.querySelector('.chatbox').style.display = 'flex';
  }, 800);
  };

  const messages = document.getElementById("messages");
  const input = document.getElementById("userInput");

  function sendMessage() {
    const text = input.value.trim();
    if (!text) return;
    appendMessage(text, 'user');
    input.value = '';

    const typing = document.createElement('div');
    typing.className = 'message bot typing';
    typing.innerText = 'Typing...';
    messages.appendChild(typing);
    messages.scrollTop = messages.scrollHeight;

    setTimeout(() => {
      typing.remove();
      respondToUser(text);
    }, 1200);
  }

  function respondToUser(input) {
    const msg = input.trim().toLowerCase();
    let response = "ü§ñ I'm not sure I understand yet. Please type 1-4 or ask a question like 'How long does recovery take?'";

    if (msg === "1") {
      response = "üîß Start recovery: <a href='https://chdsform.github.io/chds-appeal-form' target='_blank'>CHDS Appeal Form</a>";
    } else if (msg === "2") {
      response = "üì§ Upload ID here: <a href='https://chdsform.github.io/upload-id' target='_blank'>Upload Government ID</a>";
    } else if (msg === "3") {
      response = "üìä Track request: <a href='https://chdsform.github.io/status-check' target='_blank'>Track Request</a>";
    } else if (msg === "4") {
      response = "üí¨ Contact support: <a href='https://m.me/CharlesCHDS' target='_blank'>Messenger Chat</a>";
    } else if (msg.includes("how") && msg.includes("long")) {
      response = "üïí Recovery typically takes 24-48 hours once we‚Äôve received all necessary documents.";
    } else if (msg.includes("what") && msg.includes("needed")) {
      response = "üìù To recover your account, we need:
- A valid government-issued ID
- The email or phone linked to your Facebook or Instagram
- Brief explanation of the issue";
    } else if (msg.includes("hello") || msg.includes("hi")) {
      response = "üëã Hi there! I'm CHDS Bot. I can help with:
1Ô∏è‚É£ Account Recovery
2Ô∏è‚É£ Uploading ID
3Ô∏è‚É£ Tracking Requests
4Ô∏è‚É£ Contacting Support

Type 1-4 or ask me a question!";
    }

    appendMessage(marked.parse(response), 'bot');
  }

  function appendMessage(content, sender) {
    const msg = document.createElement('div');
    msg.className = `message ${sender}`;
    msg.innerHTML = content;
    messages.appendChild(msg);
    messages.scrollTop = messages.scrollHeight;
  }

  // Stars background
  const canvas = document.getElementById("bg");
  const ctx = canvas.getContext("2d");
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  const stars = [];
  for (let i = 0; i < 150; i++) {
    stars.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, r: Math.random()*1.5 + 0.5 });
  }
  function drawStars() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "#1f51ff";
    for (const s of stars) {
      ctx.beginPath();
      ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
      ctx.fill();
    }
    requestAnimationFrame(drawStars);
  }
  drawStars();
</script>
</body>
</html>
